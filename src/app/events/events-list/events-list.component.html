<div class="max-w-6xl mx-auto px-4 py-8 space-y-6 font-[Poppins,sans-serif]">

  <!-- 🔍 Filters -->
  <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
   <!-- Department Filter -->
<div>
  <label class="block text-sm font-semibold text-gray-700 mb-1">Filter by Department</label>
  <select [(ngModel)]="selectedCategory" (change)="filterEvents()"
          class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
    <option value="all">All Departments</option>
    <option *ngFor="let cat of categories" [value]="cat.value">{{ cat.name }}</option>
  </select>
</div>


  
    <!-- Search -->
    <div>
      <label class="block text-sm font-semibold text-gray-700 mb-1">Search Events</label>
      <input type="text" [(ngModel)]="searchQuery" (input)="filterEvents()" placeholder="Search by title or description"
             class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" />
    </div>
  </div>

  <!-- 🎉 Event Cards -->
  <div class="grid grid-cols-1 gap-6">
    <div *ngFor="let event of paginatedEvents"
         [ngClass]="{ 'opacity-100': canRegister(event.department), 'opacity-60': !canRegister(event.department) }"
         class="bg-white border border-blue-200 rounded-xl shadow-sm overflow-hidden flex flex-col md:flex-row transition-transform duration-200 hover:scale-[1.01] hover:shadow-md">

      <!-- Image -->
      <div class="w-full md:w-1/3 h-48 md:h-auto">
<img src="assets/card1 (1).jpg" alt="Event Image" class="w-full h-full object-cover" />
      </div>

      <!-- Content -->
      <div class="w-full md:w-2/3 p-4 flex flex-col justify-between">
        <div>
          <h2 class="text-lg font-semibold text-gray-800">{{ event.title }}</h2>
          <p class="text-gray-600 text-sm">{{ event.desc }}</p>

          <div class="flex flex-wrap gap-2 mt-2 text-sm">
            <span class="flex items-center gap-2 bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">
  <img src="assets/map-pin.png" alt="Location" class="w-4 h-4" />
  {{ event.location }}
</span>

<span class="flex items-center gap-2 bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">
  <img src="assets/calendar-fold.png" alt="Date" class="w-4 h-4" />
  {{ event.date }}
</span>

<span class="flex items-center gap-2 bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">
  <img src="assets/clock-3.png" alt="Time" class="w-4 h-4" />
  {{ event.time }}
</span>

            <span class="bg-blue-50 text-blue-600 px-3 py-1 rounded-full text-xs">{{ event.department | titlecase }} Dept</span>
          </div>
        </div>

        <!-- Action Button & Restriction -->
        <div class="mt-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
          <a [routerLink]="'/events/' + event.id"
             class="inline-block text-sm px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition">
            View Details
          </a>

          <!-- Restriction Notice if not allowed -->
          <ng-container *ngIf="!canRegister(event.department)">
            <span class="text-red-500 text-sm">You can't register for this event.</span>
          </ng-container>
        </div>
      </div>
    </div>
  </div>
  <!-- No Results -->
  <div *ngIf="filteredEvents.length === 0" class="text-center text-gray-600 py-8">
    No events match your filters.
  </div>

  <!-- Pagination -->
  <div class="flex justify-center gap-4 mt-6">
    <button (click)="prevPage()" [disabled]="currentPage === 1"
            class="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50">
      Prev
    </button>
    <span class="text-gray-600 text-sm">Page {{ currentPage }} of {{ totalPages }}</span>
    <button (click)="nextPage()" [disabled]="currentPage === totalPages"
            class="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50">
      Next
    </button>
  </div>
</div>
